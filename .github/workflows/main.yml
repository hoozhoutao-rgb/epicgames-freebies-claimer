- name: Install dependencies
  run: |
    rm -rf node_modules
    rm -f package-lock.json
    npm install --legacy-peer-deps

- name: Generate accounts.json
  env:
    EPIC_GAMES_DATA: ${{ secrets.EPIC_GAMES_DATA }}
  run: |
    cat > accounts.json << EOF
    [
      {
        "cookie": "$EPIC_GAMES_DATA"
      }
    ]
    EOF

- name: Generate minimal config.json   # ðŸ‘ˆ å°±åœ¨è¿™é‡Œ
  run: |
    cat > config.json << EOF
    {
      "runOnStartup": true,
      "once": true,
      "headless": true,
      "debug": false
    }
    EOF

- name: Run claimer
  run: node claimer.js
