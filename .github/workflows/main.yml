name: Daily Claim

on:
  workflow_dispatch:
  schedule:
    - cron: "0 16 * * *"

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      # å¿…é¡»ç”¨ Node 20 (è§£å†³äº†ä½  File is not defined çš„é—®é¢˜)
      - uses: actions/setup-node@v3
        with:
          node-version: 20

      # ğŸ”¥ ç»ˆæå®‰è£…ï¼šå½»åº•æ¸…é™¤å¹¶ç”¨ --legacy-peer-deps å¼ºåˆ¶å®‰è£…
      - name: Fresh Install and Force Clean
        run: |
          rm -rf node_modules
          rm -f package-lock.json
          npm install --legacy-peer-deps

      # è¿è¡ŒæŒ‡ä»¤æ”¹ä¸ºï¼šnode claimer.js (å› ä¸ºæ–‡ä»¶ç¡®å®åœ¨æ ¹ç›®å½•)
      - name: Run Claimer
        env:
          EPIC_GAMES_DATA: ${{ secrets.EPIC_GAMES_DATA }}
        run: node claimer.js
