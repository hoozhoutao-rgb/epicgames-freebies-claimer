name: Daily Claim

on:
  workflow_dispatch:
  schedule:
    - cron: "0 16 * * *"

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      # å¿…é¡»ç”¨ Node 20 (è§£å†³äº†ä½  File is not defined çš„é—®é¢˜)
      - uses: actions/setup-node@v3
        with:
          node-version: 20

      # æ¸…ç†æ—§é”ï¼Œå®‰è£…æ–°ä¾èµ– (è§£å†³äº†ä½  ReadableStream çš„é—®é¢˜)
      - name: Fresh Install
        run: |
          rm -rf node_modules
          rm -f package-lock.json
          npm install

      # ğŸ”¥ æœ€ç»ˆå…³é”®ï¼šç›´æ¥æ‰§è¡Œ JavaScript æ–‡ä»¶ï¼
      # ä¸ç”¨ npm startï¼Œä¸èµ° npm start å¼¯è·¯ï¼Œç›´æ¥è®© Node è·‘æ–‡ä»¶
      - name: Run Claimer
        env:
          EPIC_GAMES_DATA: ${{ secrets.EPIC_GAMES_DATA }}
        run: node claimer.js
