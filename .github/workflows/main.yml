name: Daily Claim

on:
  workflow_dispatch:
  schedule:
    - cron: "0 16 * * *"

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3

      # ä½¿ç”¨ Node 18 (æœ€ç¨³å®šç‰ˆæœ¬)
      - uses: actions/setup-node@v3
        with:
          node-version: 18

      # ğŸ”¥ æ ¸å¿ƒæ­¥éª¤ï¼šå¼ºåˆ¶åˆ é™¤æ—§é”ï¼Œå®‰è£…å…¨æ–°ä¾èµ–
      # è¿™æ­¥èƒ½è§£å†³ ReferenceError: ReadableStream ç­‰æ‰€æœ‰ç‰ˆæœ¬ä¸å…¼å®¹é—®é¢˜
      - name: Fresh Install
        run: |
          rm -rf node_modules
          rm -f package-lock.json
          npm install

      # å¯åŠ¨è„šæœ¬
      - name: Run
        env:
          EPIC_GAMES_DATA: ${{ secrets.EPIC_GAMES_DATA }}
        run: npm start
